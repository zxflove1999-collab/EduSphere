
## 智能教学系统 (Smart Teaching System)

## 1\. 院系管理 (Admin)

[cite\_start](此模块为课程管理的基础，用于 `t_course` [cite: 558] 关联)

### 1.1 院系列表查询

#### 1.1.1 基本信息

  * **请求路径：** `/admin/depts`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 该接口用于院系列表数据的条件分页查询 [cite: 558]。

#### 1.1.2 请求参数

  * **格式：** `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `page` | Integer | 否 | 页码 (默认 1) |
| `pageSize` | Integer | 否 | 每页数量 (默认 10) |
| `department_name` | String | 否 | 按院系名称模糊查询 |

  * **请求数据样例：**
    `/admin/depts?page=1&pageSize=10&department_name=信息`

#### 1.1.3 响应数据

  * **参数格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 备注 |
| :--- | :--- | :--- |
| `code` | Integer | 响应码, 1为成功, 0为失败 |
| `msg` | String | 响应消息 |
| `data.total` | Long | 总记录数 |
| `data.rows` | Array | [cite\_start]院系列表 ( `t_department` [cite: 558] 数组) |

  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "department_id": 1,
        "department_name": "信息工程学院",
        "description": "...",
        "created_at": "2025-11-01T10:00:00"
      }
    ]
  }
}
```

### 1.2 添加院系

#### 1.2.1 基本信息

  * **请求路径：** `/admin/depts`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 该接口用于添加院系数据 [cite: 558]。

#### 1.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `department_name` | String | 是 | 院系名称 |
| `description` | String | 否 | 院系描述 |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "department_name": "信息工程学院",
    "description": "专注于计算机科学与技术"
}
```

#### 1.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

-----

## 12\. 附录：宿舍综合问卷接口 (Student)

> 说明：教学分析和智能推荐需要使用学生宿舍画像，因此在本文档中同步记录跨系统共享的问卷接口。

### 12.1 提交宿舍综合问卷

#### 12.1.1 基本信息

  * **请求路径：** `/student/dorm/survey`
  * **请求方式：** `POST`
  * **接口描述：** 写入/更新 `t_dorm_survey` 中的问卷数据。

#### 12.1.2 请求参数

  * **Header：** `token`
  * **格式：** `application/json`

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `wake_up_time` | Time | 否 | 起床时间 |
| `sleep_time` | Time | 否 | 睡觉时间 |
| `cleanliness_preference` | Integer | 否 | 卫生偏好 |
| `noise_tolerance` | Integer | 否 | 噪音容忍度 |
| `sleep_time_pref` | Integer | 否 | 睡眠偏好 (1:12点前, 2:12点后) |
| `wake_time_pref` | Integer | 否 | 起床偏好 (1:7点前, 2:7点后) |
| `nap_habit` | Integer | 否 | 午睡习惯 (1:有, 2:无) |
| `smoking_status` | Integer | 否 | 是否抽烟 |
| `roommate_smoke_accept` | Integer | 否 | 是否接受室友抽烟 |
| `gaming_freq` | Integer | 否 | 游戏频率 |
| `headphone_usage` | Integer | 否 | 耳机使用习惯 |
| `chatting_pref` | Integer | 否 | 聊天偏好 |
| `guest_acceptance` | Integer | 否 | 室友带客接受度 |
| `group_activity_willingness` | Integer | 否 | 集体活动意愿 |
| `hygiene_requirement` | Integer | 否 | 卫生要求 |
| `organization_level` | Integer | 否 | 整理程度 |
| `roommate_hygiene_tolerance` | Integer | 否 | 室友卫生容忍度 |
| `quiet_study_need` | Integer | 否 | 安静学习需求 |
| `noise_tolerance_level` | Integer | 否 | 室内噪音容忍等级 |
| `dorm_food_freq` | Integer | 否 | 宿舍吃东西频率 |
| `fragrance_usage` | Integer | 否 | 香氛使用频率 |
| `smell_sensitivity` | Integer | 否 | 气味敏感度 |

#### 12.1.3 响应数据

  * **参数格式：** `application/json`

```json
{
  "code": 1,
  "msg": "success",
  "data": null
}
```

### 12.2 查询宿舍综合问卷

#### 12.2.1 基本信息

  * **请求路径：** `/student/dorm/survey`
  * **请求方式：** `GET`
  * **接口描述：** 返回当前登录学生最近一次提交的宿舍问卷数据。

#### 12.2.2 请求参数

  * **Header：** `token`

#### 12.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "survey_id": 9001,
    "wake_up_time": "07:10:00",
    "sleep_time": "23:30:00",
    "sleep_time_pref": 1,
    "wake_time_pref": 2,
    "nap_habit": 1,
    "roommate_smoke_accept": 1,
    "quiet_study_need": 1,
    "smell_sensitivity": 1,
    "submission_time": "2025-11-20T09:30:00"
  }
}
```

### 1.3 根据ID查询院系

#### 1.3.1 基本信息

  * **请求路径：** `/admin/depts/{id}`
  * **请求方式：** `GET`
  * **接口描述：** 该接口用于根据ID查询院系数据。

#### 1.3.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/admin/depts/1`

#### 1.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "department_id": 1,
    "department_name": "信息工程学院",
    "description": "...",
    "created_at": "2025-11-01T10:00:00"
  }
}
```

### 1.4 修改院系

#### 1.4.1 基本信息

  * **请求路径：** `/admin/depts`
  * **请求方式：** `PUT`
  * **接口描述：** 该接口用于修改院系数据。

#### 1.4.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `department_id` | Integer | 是 | 院系ID |
| `department_name` | String | 是 | 院系名称 |
| `description` | String | 否 | 院系描述 |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "department_id": 1,
    "department_name": "信息工程学院(新)",
    "description": "更新后的描述"
}
```

#### 1.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 1.5 删除院系

#### 1.5.1 基本信息

  * **请求路径：** `/admin/depts/{id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 该接口用于根据ID删除院系数据。

#### 1.5.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/admin/depts/1`

#### 1.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 1.6 查询所有院系 (下拉列表)

#### 1.6.1 基本信息

  * **请求路径：** `/admin/depts/list`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 该接口用于查询所有院系信息，用于创建课程模板时的下拉列表 [cite: 558]。

#### 1.6.2 请求参数

  * 无

#### 1.6.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    { "department_id": 1, "department_name": "信息工程学院" },
    { "department_id": 2, "department_name": "文学院" }
  ]
}
```

-----

## 2\. 课程模板管理 (Admin / 教师)

[cite\_start](对应 `t_course` [cite: 558][cite\_start]，是教师“创建课程”[cite: 55] 的基础模板)

### 2.1 课程模板列表查询

#### 2.1.1 基本信息

  * **请求路径：** `/courses`
  * **请求方式：** `GET`
  * **接口描述：** 该接口用于课程模板列表数据的条件分页查询。

#### 2.1.2 请求参数

  * **格式：** `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `page` | Integer | 否 | 页码 (默认 1) |
| `pageSize` | Integer | 否 | 每页数量 (默认 10) |
| `course_name` | String | 否 | 按课程名称模糊查询 |
| `course_code` | String | 否 | 按课程代码查询 |
| `department_id` | Integer | 否 | 按所属院系ID查询 |

  * **请求数据样例：**
    `/courses?page=1&pageSize=10&course_name=计算机`

#### 2.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "course_id": 101,
        "course_code": "CS101",
        "course_name": "计算机导论",
        "department_id": 1,
        "department_name": "信息工程学院",
        "credits": 3.0,
        "description": "...",
        "created_by": 2001,
        "created_at": "2025-11-02T10:00:00"
      }
    ]
  }
}
```

### 2.2 添加课程模板

#### 2.2.1 基本信息

  * **请求路径：** `/courses`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 该接口用于添加课程模板数据 [cite: 558]。

#### 2.2.2 请求参数

  * **格式：** `application/json`
  * [cite\_start]**参数说明：** (基于 `t_course` [cite: 558])

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `course_code` | String | 是 | 课程代码 (如: "CS101") |
| `course_name` | String | 是 | 课程名称 |
| `department_id` | Integer | 是 | [cite\_start]关联 `t_department.department_id` [cite: 558] |
| `credits` | Decimal | 是 | 课程学分 (如: 3.0) |
| `description` | String | 否 | 课程描述 |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "course_code": "CS101",
    "course_name": "计算机导论",
    "department_id": 1,
    "credits": 3.0,
    "description": "计算机科学的基础课程"
}
```

#### 2.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 2.3 根据ID查询课程模板

#### 2.3.1 基本信息

  * **请求路径：** `/courses/{id}`
  * **请求方式：** `GET`
  * **接口描述：** 该接口用于根据ID查询课程模板数据。

#### 2.3.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/courses/101`

#### 2.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "course_id": 101,
    "course_code": "CS101",
    "course_name": "计算机导论",
    "department_id": 1,
    "credits": 3.0,
    "description": "...",
    "created_by": 2001,
    "created_at": "2025-11-02T10:00:00"
  }
}
```

### 2.4 修改课程模板

#### 2.4.1 基本信息

  * **请求路径：** `/courses`
  * **请求方式：** `PUT`
  * **接口描述：** 该接口用于修改课程模板数据。

#### 2.4.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `course_id` | Long | 是 | 课程模板ID |
| `course_code` | String | 是 | 课程代码 |
| `course_name` | String | 是 | 课程名称 |
| `department_id` | Integer | 是 | 院系ID |
| `credits` | Decimal | 是 | 课程学分 |
| `description` | String | 否 | 课程描述 |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "course_id": 101,
    "course_code": "CS101-NEW",
    "course_name": "计算机导论（新）",
    "department_id": 1,
    "credits": 3.5,
    "description": "更新后的课程描述"
}
```

#### 2.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 2.5 删除课程模板

#### 2.5.1 基本信息

  * **请求路径：** `/courses/{id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 该接口用于根据ID删除课程模板数据。（注意：如果已有班级关联，可能需要限制删除）

#### 2.5.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/courses/101`

#### 2.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 2.6 查询所有课程模板 (下拉列表)

#### 2.6.1 基本信息

  * **请求路径：** `/courses/list`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 该接口用于查询所有课程模板，用于教师“创建课程”[cite: 55] [cite\_start]时选择模板 [cite: 558]。

#### 2.6.2 请求参数

  * 无

#### 2.6.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    { "course_id": 101, "course_name": "计算机导论" },
    { "course_id": 102, "course_name": "数据结构" }
  ]
}
```

-----

## 3\. 开课班级管理 (教师)

[cite\_start](对应 `t_class` [cite: 558][cite\_start]，教师“创建课程”[cite: 55] 的具体操作)

### 3.1 教师的班级列表查询

#### 3.1.1 基本信息

  * **请求路径：** `/teacher/classes`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 该接口用于查询**当前登录教师**所开设的班级列表 [cite: 558]。

#### 3.1.2 请求参数

  * **格式：** `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `page` | Integer | 否 | 页码 (默认 1) |
| `pageSize` | Integer | 否 | 每页数量 (默认 10) |
| `course_name` | String | 否 | 按课程名称模糊查询 (需要关联 `t_course`) |
| `semester` | String | 否 | 按学期查询 (如: "2025-Fall") |
| `status` | Integer | 否 | [cite\_start]按班级状态查询 [cite: 558] (1:待开放, 2:选课中, 3:授课中, 4:已结课) |

  * **请求数据样例：**
    `/teacher/classes?page=1&pageSize=10&semester=2025-Fall`

#### 3.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "class_id": 501,
        "course_id": 101,
        "course_name": "计算机导论",
        "teacher_id": 2001,
        "teacher_name": "周嘉仪",
        "semester": "2025-Fall",
        "max_capacity": 100,
        "current_enrollment": 0,
        "status": 1
      }
    ]
  }
}
```

### 3.2 创建班级 (教师)

#### 3.2.1 基本信息

  * **请求路径：** `/teacher/classes`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 对应教师“创建课程”[cite: 55][cite\_start]，即基于 `t_course` [cite: 558] [cite\_start]创建一个 `t_class` [cite: 558] 实例。

#### 3.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `course_id` | Long | 是 | [cite\_start]关联的课程模板ID `t_course.course_id` [cite: 558] |
| `semester` | String | 是 | 学期 (如: "2025-Fall") |
| `max_capacity` | Integer | 是 | 最大选课人数 |
| `status` | Integer | 是 | [cite\_start]班级状态 (1:待开放, 2:选课中) [cite: 558] |
| `schedules` | Array | 是 | [cite\_start]课表时间地点数组 (用于批量写入 `t_class_schedule` [cite: 558]) |
| `schedules[].location_text` | String | 是 | 上课地点 (如: "教3-101") |
| `schedules[].day_of_week` | Integer | 是 | [cite\_start]星期几 (1=周一, 7=周日) [cite: 558] |
| `schedules[].start_time` | String | 是 | [cite\_start]上课时间 (如: "08:00:00") [cite: 558] |
| `schedules[].end_time` | String | 是 | [cite\_start]下课时间 (如: "09:40:00") [cite: 558] |
| `schedules[].week_range` | String | 是 | [cite\_start]上课周次 (如: "1-16") [cite: 558] |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "course_id": 101,
    "semester": "2025-Fall",
    "max_capacity": 100,
    "status": 1,
    "schedules": [
        {
            "location_text": "教3-101",
            "day_of_week": 1,
            "start_time": "08:00:00",
            "end_time": "09:40:00",
            "week_range": "1-16"
        },
        {
            "location_text": "教3-101",
            "day_of_week": 3,
            "start_time": "10:00:00",
            "end_time": "11:40:00",
            "week_range": "1-16"
        }
    ]
}
```

#### 3.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 3.3 根据ID查询班级详情 (教师)

#### 3.3.1 基本信息

  * **请求路径：** `/teacher/classes/{id}`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 该接口用于根据 `class_id` 查询班级详细信息及其课表安排 [cite: 558]。

#### 3.3.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/classes/501`

#### 3.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "class_id": 501,
    "course_id": 101,
    "course_name": "计算机导论",
    "teacher_id": 2001,
    "semester": "2025-Fall",
    "max_capacity": 100,
    "status": 1,
    "schedules": [
      {
        "schedule_id": 1,
        "location_text": "教3-101",
        "day_of_week": 1,
        "start_time": "08:00:00",
        "end_time": "09:40:00",
        "week_range": "1-16"
      },
      {
        "schedule_id": 2,
        "location_text": "教3-101",
        "day_of_week": 3,
        "start_time": "10:00:00",
        "end_time": "11:40:00",
        "week_range": "1-16"
      }
    ]
  }
}
```

### 3.4 修改班级信息 (教师)

#### 3.4.1 基本信息

  * **请求路径：** `/teacher/classes`
  * **请求方式：** `PUT`
  * **接口描述：** 修改班级数据信息。**注意：课表 `schedules` 通常建议单独提供接口修改**，这里简化为一体修改。

#### 3.4.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | [cite\_start]班级ID `t_class.class_id` [cite: 558] |
| `max_capacity` | Integer | 是 | 最大选课人数 |
| `status` | Integer | 是 | 班级状态 |
| `schedules` | Array | 是 | **全量**课表时间地点数组 (先删后插) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "class_id": 501,
    "max_capacity": 120,
    "status": 2,
    "schedules": [
        {
            "location_text": "教5-201",
            "day_of_week": 1,
            "start_time": "08:00:00",
            "end_time": "09:40:00",
            "week_range": "1-16"
        }
    ]
}
```

#### 3.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 3.5 删除班级 (教师)

#### 3.5.1 基本信息

  * **请求路径：** `/teacher/classes/{id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 该接口用于根据ID删除班级数据。（注意：如果已有学生选课，应限制删除）

#### 3.5.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/classes/501`

#### 3.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

## 4\. 学生选课与课表 (Student)

[cite\_start](此模块涵盖学生端的课程操作，对应 `t_student_class` 和 `t_class_schedule` 表 [cite: 558])

### 4.1 可选班级列表查询 (学生)

#### 4.1.1 基本信息

  * **请求路径：** `/student/classes/available`
  * **请求方式：** `GET`
  * **接口描述：** 该接口用于学生查询当前学期所有**开放选课**的班级列表 (即 `t_class.status = 2`)。

#### 4.1.2 请求参数

  * **格式：** `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `page` | Integer | 否 | 页码 (默认 1) |
| `pageSize` | Integer | 否 | 每页数量 (默认 10) |
| `course_name` | String | 否 | 按课程名称模糊查询 (关联 `t_course`) |
| `teacher_name` | String | 否 | 按教师姓名模糊查询 (关联 `t_user`) |
| `department_id` | Integer | 否 | 按开课院系ID查询 |

  * **请求数据样例：**
    `/student/classes/available?page=1&pageSize=10&course_name=计算机`

#### 4.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 5,
    "rows": [
      {
        "class_id": 501,
        "course_code": "CS101",
        "course_name": "计算机导论",
        "teacher_name": "周嘉仪",
        "semester": "2025-Fall",
        "credits": 3.0,
        "location_text": "教3-101",
        "schedule_info": "周一 1-2节; 周三 3-4节",
        "max_capacity": 100,
        "current_enrollment": 80
      }
    ]
  }
}
```

### 4.2 学生选择课程

#### 4.2.1 基本信息

  * **请求路径：** `/student/my-classes`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 对应学生“选择课程”功能 [cite: 56]。在 `t_student_class` 表中创建一条记录。

#### 4.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | 要选择的班级ID (`t_class.class_id`) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "class_id": 501
}
```

#### 4.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 4.3 学生删除课程 (退课)

#### 4.3.1 基本信息

  * **请求路径：** `/student/my-classes/{class_id}`
  * **请求方式：** `DELETE`
  * [cite\_start]**接口描述：** 对应学生“删除课程”功能 [cite: 56]。将 `t_student_class` 记录的 `status` 修改为 2 (已退课)。

#### 4.3.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/student/my-classes/501`

#### 4.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 4.4 学生已选课程列表

#### 4.4.1 基本信息

  * **请求路径：** `/student/my-classes`
  * **请求方式：** `GET`
  * **接口描述：** 查询当前登录学生**已选择**的课程列表 ( `t_student_class.status = 1` )。

#### 4.4.2 请求参数

  * **格式：** `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `semester` | String | 否 | 按学期筛选 (如: "2025-Fall")，不传则查当前学期 |

  * **请求数据样例：** `/student/my-classes?semester=2025-Fall`

#### 4.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "id": 1, 
      "class_id": 501,
      "course_name": "计算机导论",
      "teacher_name": "周嘉仪",
      "credits": 3.0,
      "selection_time": "2025-11-05T10:00:00",
      "final_score": null
    }
  ]
}
```

### 4.5 学生查询课表

#### 4.5.1 基本信息

  * **请求路径：** `/student/my-schedule`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 对应学生“查询课表”功能 [cite: 56]。查询学生已选课程的 `t_class_schedule` 详细信息。

#### 4.5.2 请求参数

  * **格式：** `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `semester` | String | 否 | 按学期筛选 (如: "2025-Fall")，不传则查当前学期 |

  * **请求数据样例：** `/student/my-schedule?semester=2025-Fall`

#### 4.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "schedule_id": 1,
      "class_id": 501,
      "course_name": "计算机导论",
      "location_text": "教3-101",
      "day_of_week": 1,
      "start_time": "08:00:00",
      "end_time": "09:40:00",
      "week_range": "1-16",
      "teacher_name": "周嘉仪"
    },
    {
      "schedule_id": 2,
      "class_id": 501,
      "course_name": "计算机导论",
      "location_text": "教3-101",
      "day_of_week": 3,
      "start_time": "10:00:00",
      "end_time": "11:40:00",
      "week_range": "1-16",
      "teacher_name": "周嘉仪"
    }
  ]
}
```

-----

## 5\. 课程资源管理 (教师/学生)

[cite\_start](此模块对应 `t_course_resource` 和 `t_resource_folder` 表 [cite: 558])

### 5.1 查询班级资源列表 (教师/学生)

#### 5.1.1 基本信息

  * **请求路径：** `/classes/{class_id}/resources`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 查询指定班级下的资源文件夹和文件列表 [cite: 51, 59]。

#### 5.1.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | 班级ID (路径参数) |
| `folder_id` | Long | 否 | 查询此文件夹下的内容 ( `t_resource_folder.folder_id` )。不传则查询根目录。 |

  * **请求数据样例：** `/classes/501/resources?folder_id=10`

#### 5.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "folders": [
      {
        "folder_id": 11,
        "folder_name": "课件",
        "parent_folder_id": 10,
        "created_at": "2025-11-06T10:00:00"
      }
    ],
    "files": [
      {
        "resource_id": 1,
        "file_name": "第一章：计算机基础.pdf",
        "file_url": "https://.../CS101/file1.pdf",
        "file_type": "pdf",
        "file_size": 2048000,
        "description": "第一章课件",
        "uploader_name": "周嘉仪",
        "upload_at": "2025-11-06T11:00:00",
        "download_count": 15
      }
    ]
  }
}
```

### 5.2 创建资源文件夹 (教师)

#### 5.2.1 基本信息

  * **请求路径：** `/classes/{class_id}/resources/folders`
  * **请求方式：** `POST`
  * **接口描述：** 教师在指定班级下创建文件夹。

#### 5.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | (路径参数) 班级ID |
| `folder_name` | String | 是 | 文件夹名称 |
| `parent_folder_id` | Long | 否 | 父文件夹ID (不传则在根目录创建) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "folder_name": "实验资料",
    "parent_folder_id": null
}
```

#### 5.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 5.3 上传课程资源 (教师)

#### 5.3.1 基本信息

  * **请求路径：** `/classes/{class_id}/resources/upload`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 对应教师“上传课程资源”功能 [cite: 55]。

#### 5.3.2 请求参数

  * **格式：** `multipart/form-data`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | (路径参数) 班级ID |
| `file` | File | 是 | 上传的文件 |
| `folder_id` | Long | 否 | 上传到哪个文件夹 (不传则为根目录) |
| `description` | String | 否 | 资源描述 |

#### 5.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": {
        "resource_id": 2,
        "file_name": "实验一：环境搭建.docx",
        "file_url": "https://.../CS101/file2.docx"
    }
}
```

### 5.4 删除课程资源 (教师)

#### 5.4.1 基本信息

  * **请求路径：** `/classes/resources/{resource_id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 教师删除指定的文件资源。

#### 5.4.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/classes/resources/2`

#### 5.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 5.5 删除资源文件夹 (教师)

#### 5.5.1 基本信息

  * **请求路径：** `/classes/resources/folders/{folder_id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 教师删除指定的文件夹（后端需处理文件夹下内容，如提示“非空文件夹不能删除”或“递归删除”）。

#### 5.5.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/classes/resources/folders/11`

#### 5.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

## 6\. 成绩管理 (Teacher / Student)

[cite\_start](此模块对应 `t_grade_component`, `t_student_grade` 表，实现教师录入成绩 [cite: 58] [cite\_start]和学生查询成绩 [cite: 60])

### 6.1 查询班级成绩组成 (教师)

#### 6.1.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/grade-components`
  * **请求方式：** `GET`
  * **接口描述：** 教师查询指定班级的成绩组成项（如：平时分、期中、期末）及其权重。

#### 6.1.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/classes/501/grade-components`

#### 6.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "component_id": 1,
      "class_id": 501,
      "component_name": "平时作业",
      "weight": 0.3000,
      "max_score": 100
    },
    {
      "component_id": 2,
      "class_id": 501,
      "component_name": "期末考试",
      "weight": 0.7000,
      "max_score": 100
    }
  ]
}
```

### 6.2 添加成绩组成 (教师)

#### 6.2.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/grade-components`
  * **请求方式：** `POST`
  * **接口描述：** 教师为班级添加新的成绩组成项。

#### 6.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | (路径参数) 班级ID |
| `component_name` | String | 是 | 成绩项名称 (如: "期中考试") |
| `weight` | Decimal | 是 | 权重 (如: 0.3) |
| `max_score` | Decimal | 是 | 该项满分 (如: 100) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "component_name": "期中考试",
    "weight": 0.3,
    "max_score": 100
}
```

#### 6.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 6.3 修改成绩组成 (教师)

#### 6.3.1 基本信息

  * **请求路径：** `/teacher/classes/grade-components`
  * **请求方式：** `PUT`
  * **接口描述：** 教师修改已定义的成绩组成项。

#### 6.3.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `component_id` | Long | 是 | 成绩项ID |
| `component_name` | String | 是 | 成绩项名称 |
| `weight` | Decimal | 是 | 权重 |
| `max_score` | Decimal | 是 | 该项满分 |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "component_id": 1,
    "component_name": "平时作业(修改)",
    "weight": 0.2,
    "max_score": 100
}
```

#### 6.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 6.4 删除成绩组成 (教师)

#### 6.4.1 基本信息

  * **请求路径：** `/teacher/classes/grade-components/{id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 教师删除成绩组成项（若已有成绩录入，应限制删除）。

#### 6.4.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/classes/grade-components/1`

#### 6.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 6.5 查询班级成绩册 (教师)

#### 6.5.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/gradebook`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 教师获取班级所有学生的成绩册，用于查看和“录入成绩” [cite: 58]。

#### 6.5.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/classes/501/gradebook`

#### 6.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "components": [ 
      { "component_id": 1, "component_name": "平时作业", "weight": 0.3 },
      { "component_id": 2, "component_name": "期末考试", "weight": 0.7 }
    ],
    "students": [
      {
        "student_id": 1001,
        "full_name": "A同学",
        "student_id_number": "2021001001",
        "scores": {
          "1": 90.00,
          "2": 85.00
        },
        "final_score": 86.50
      },
      {
        "student_id": 1002,
        "full_name": "B同学",
        "student_id_number": "2021001002",
        "scores": {
          "1": null,
          "2": null
        },
        "final_score": null
      }
    ]
  }
}
```

### 6.6 录入/修改学生成绩 (教师)

#### 6.6.1 基本信息

  * **请求路径：** `/teacher/grades/batch`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 教师批量录入或修改学生的单项成绩 [cite: 58] (对应 `t_student_grade` 表)。

#### 6.6.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `component_id` | Long | 是 | 针对哪个成绩项 |
| `scores` | Array | 是 | 成绩列表 |
| `scores[].student_id` | Long | 是 | 学生ID |
| `scores[].score` | Decimal | 是 | 学生得分 (可为 null) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "component_id": 1,
    "scores": [
        { "student_id": 1001, "score": 90.00 },
        { "student_id": 1002, "score": 88.00 }
    ]
}
```

#### 6.6.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 6.7 查询我的成绩 (学生)

#### 6.7.1 基本信息

  * **请求路径：** `/student/my-classes/{class_id}/grades`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 对应学生“查询成绩”功能 [cite: 60]。

#### 6.7.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/student/my-classes/501/grades`

#### 6.7.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "components": [
      {
        "component_name": "平时作业",
        "weight": 0.3000,
        "max_score": 100,
        "my_score": 90.00
      },
      {
        "component_name": "期末考试",
        "weight": 0.7000,
        "max_score": 100,
        "my_score": 85.00
      }
    ],
    "final_score": 86.50
  }
}
```

-----

## 7\. 作业管理 (Teacher)

[cite\_start](此模块对应教师端的作业发布 [cite: 62][cite\_start]、查阅和 AI 分析功能 [cite: 62])

### 7.1 查询班级作业列表 (教师)

#### 7.1.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/homeworks`
  * **请求方式：** `GET`
  * **接口描述：** 教师查询指定班级已发布的作业列表。

#### 7.1.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **请求参数样例：** `/teacher/classes/501/homeworks?page=1&pageSize=10`

#### 7.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "homework_id": 1,
        "class_id": 501,
        "title": "第一章 课后作业",
        "due_date": "2025-11-15T23:59:59",
        "created_at": "2025-11-08T10:00:00",
        "submission_count": 5
      }
    ]
  }
}
```

### 7.2 发布作业 (教师)

#### 7.2.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/homeworks`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 对应教师“作业发布”功能 [cite: 62] (创建 `t_homework` 记录)。

#### 7.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | (路径参数) 班级ID |
| `title` | String | 是 | 作业标题 |
| `description` | String | 否 | 作业详细描述 |
| `due_date` | Timestamp | 是 | 截止日期 (如: "2025-11-15T23:59:59") |
| `allow_late_submission` | Integer | 是 | 是否允许迟交 (1:是, 0:否) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "title": "第二章 课后作业",
    "description": "请完成第二章所有练习题",
    "due_date": "2025-11-20T23:59:59",
    "allow_late_submission": 0
}
```

#### 7.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 7.3 查询作业详情 (教师)

#### 7.3.1 基本信息

  * **请求路径：** `/teacher/homeworks/{homework_id}`
  * **请求方式：** `GET`
  * **接口描述：** 教师查询单个作业的详细信息。

#### 7.3.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/homeworks/1`

#### 7.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：** (同 7.2.2 请求参数 + ID)

### 7.4 修改作业 (教师)

#### 7.4.1 基本信息

  * **请求路径：** `/teacher/homeworks`
  * **请求方式：** `PUT`
  * **接口描述：** 教师修改已发布的作业信息。

#### 7.4.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `homework_id` | Long | 是 | 作业ID |
| `title` | String | 是 | 作业标题 |
| `description` | String | 否 | 作业详细描述 |
| `due_date` | Timestamp | 是 | 截止日期 |
| `allow_late_submission` | Integer | 是 | 是否允许迟交 (1:是, 0:否) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "homework_id": 1,
    "title": "第一章 课后作业 (已修改)",
    "description": "...",
    "due_date": "2025-11-16T23:59:59",
    "allow_late_submission": 1
}
```

#### 7.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 7.5 删除作业 (教师)

#### 7.5.1 基本信息

  * **请求路径：** `/teacher/homeworks/{homework_id}`
  * **请求方式：** `DELETE`
  * **接口描述：** 教师删除作业 (若已有提交，应限制删除)。

#### 7.5.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/homeworks/1`

#### 7.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 7.6 查询作业提交列表 (教师)

#### 7.6.1 基本信息

  * **请求路径：** `/teacher/homeworks/{homework_id}/submissions`
  * **请求方式：** `GET`
  * **接口描述：** 教师查询指定作业的所有学生提交情况。

#### 7.6.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `homework_id` | Long | 是 | (路径参数) 作业ID |
| `page` | Integer | 否 | 页码 (默认 1) |
| `pageSize` | Integer | 否 | 每页数量 (默认 10) |
| `status` | Integer | 否 | 按提交状态筛选 (1:准时, 2:迟交, 3:未提交) |

  * **请求数据样例：** `/teacher/homeworks/1/submissions?page=1&pageSize=10`

#### 7.6.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "submission_id": 101,
        "homework_id": 1,
        "student_id": 1001,
        "student_name": "A同学",
        "submitted_at": "2025-11-15T10:00:00",
        "status": 1,
        "grade": 90.00
      }
    ]
  }
}
```

### 7.7 批改作业 (教师)

#### 7.7.1 基本信息

  * **请求路径：** `/teacher/submissions/{submission_id}/grade`
  * **请求方式：** `PUT`
  * **接口描述：** 教师批改单个作业，给出分数和评语 (更新 `t_homework_submission`)。

#### 7.7.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `submission_id` | Long | 是 | (路径参数) 提交ID |
| `grade` | Decimal | 是 | 作业得分 |
| `teacher_feedback` | String | 否 | 教师评语 |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "grade": 90.00,
    "teacher_feedback": "完成得很好！"
}
```

#### 7.7.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 7.8 获取 AI 教学建议 (教师)

#### 7.8.1 基本信息

  * **请求路径：** `/teacher/homeworks/{homework_id}/suggestions`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 教师获取针对某次作业的 AI 教学建议 [cite: 62] (查询 `t_teaching_suggestion`)。

#### 7.8.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/homeworks/1/suggestions`

#### 7.8.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "suggestion_id": 1,
      "homework_id": 1,
      "suggestion_content": "分析显示，80%的学生在第3题上出错，建议加强相关知识点的讲解...",
      "generated_at": "2025-11-16T10:00:00"
    }
  ]
}
```

-----

## 8\. 作业管理 (Student)

[cite\_start](此模块对应学生端的作业查看、提交 [cite: 63] [cite\_start]和 AI 分析功能 [cite: 63])

### 8.1 查询班级作业列表 (学生)

#### 8.1.1 基本信息

  * **请求路径：** `/student/classes/{class_id}/homeworks`
  * **请求方式：** `GET`
  * **接口描述：** 学生查询班级的所有作业及自己的提交状态。

#### 8.1.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **请求参数样例：** `/student/classes/501/homeworks?page=1&pageSize=10`

#### 8.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "homework_id": 1,
        "title": "第一章 课后作业",
        "due_date": "2025-11-15T23:59:59",
        "my_submission_status": 1,
        "my_grade": 90.00
      }
    ]
  }
}
```

### 8.2 查询作业详情 (学生)

#### 8.2.1 基本信息

  * **请求路径：** `/student/homeworks/{homework_id}`
  * **请求方式：** `GET`
  * **接口描述：** 学生查询作业详情，以及自己的提交内容。

#### 8.2.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/student/homeworks/1`

#### 8.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "homework": {
      "homework_id": 1,
      "title": "第一章 课后作业",
      "description": "...",
      "due_date": "2025-11-15T23:59:59"
    },
    "my_submission": {
      "submission_id": 101,
      "content": "这是我的作业答案...",
      "submitted_at": "2025-11-15T10:00:00",
      "status": 1,
      "grade": 90.00,
      "teacher_feedback": "完成得很好！",
      "files": [
        {
          "file_id": 1,
          "file_name": "A同学-作业1.pdf",
          "file_url": "https://.../submission1.pdf"
        }
      ]
    }
  }
}
```

### 8.3 提交作业 (学生)

#### 8.3.1 基本信息

  * **请求路径：** `/student/homeworks/{homework_id}/submit`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 对应学生“作业提交”功能 [cite: 63]。

#### 8.3.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `homework_id` | Long | 是 | (路径参数) 作业ID |
| `content` | String | 否 | 提交的文本内容 |
| `file_urls` | Array | 否 | 附件URL列表 (字符串数组, 文件需先通过 `/upload` 接口上传) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "content": "这是我的作业答案...",
    "file_urls": [
        "https://.../submission1.pdf"
    ]
}
```

#### 8.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": {
        "submission_id": 102 
    }
}
```

### 8.4 获取 AI 学情分析 (学生)

#### 8.4.1 基本信息

  * **请求路径：** `/student/submissions/{submission_id}/analysis`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 学生获取自己某次作业提交的“AI 辅助分析”报告 [cite: 63] (查询 `t_submission_analysis`)。

#### 8.4.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/student/submissions/101/analysis`

#### 8.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "analysis_id": 1,
    "submission_id": 101,
    "student_ac_report": {
      "score": 90,
      "summary": "本次作业完成度良好，但在“知识点A”上掌握不足...",
      "suggestions": ["建议复习A知识点", "加强B类型题目的练习"]
    },
    "analysis_status": 3,
    "generated_at": "2025-11-16T11:00:00"
  }
}
```

## 9\. 考勤管理 (Teacher)

(此模块对应教师端的发起签到、查看记录)

### 9.1 发起签到 (教师)

#### 9.1.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/attendance/start`
  * **请求方式：** `POST`
  * **接口描述：** 教师为指定班级发起一个签到任务（创建一个 `t_attendance_session` 记录）。

#### 9.1.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 是 | (路径参数) 班级ID |
| `session_type` | Integer | 是 | [cite\_start]签到类型 (1:人脸, 2:定位, 3:人脸+定位) [cite: 558] |
| `duration` | Integer | 是 | 签到持续时间 (分钟, 如: 5)。后端用此计算 `end_time`。 |
| `required_latitude` | Decimal | 否 | (类型2或3时必填) [cite\_start]要求的纬度 [cite: 558] |
| `required_longitude` | Decimal | 否 | (类型2或3时必填) [cite\_start]要求的经度 [cite: 558] |
| `required_radius` | Integer | 否 | (类型2或3时必填) [cite\_start]允许的半径 (米) [cite: 558] |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "session_type": 3,
    "duration": 5,
    "required_latitude": 30.5398,
    "required_longitude": 114.3600,
    "required_radius": 100
}
```

#### 9.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": {
        "session_id": 1,
        "start_time": "2025-11-08T10:00:00",
        "end_time": "2025-11-08T10:05:00",
        "status": 1 
    }
}
```

### 9.2 结束签到 (教师)

#### 9.2.1 基本信息

  * **请求路径：** `/teacher/attendance/{session_id}/stop`
  * **请求方式：** `PUT`
  * **接口描述：** 教师手动提前结束一个进行中的签到任务。

#### 9.2.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/teacher/attendance/1/stop`

#### 9.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 9.3 查询班级考勤任务列表 (教师)

#### 9.3.1 基本信息

  * **请求路径：** `/teacher/classes/{class_id}/attendance`
  * **请求方式：** `GET`
  * **接口描述：** 教师查询指定班级的所有考勤任务（历史记录）。

#### 9.3.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **请求参数样例：** `/teacher/classes/501/attendance?page=1&pageSize=10`

#### 9.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "session_id": 1,
        "start_time": "2025-11-08T10:00:00",
        "end_time": "2025-11-08T10:05:00",
        "status": 2,
        "attendance_count": 48, 
        "total_students": 50 
      }
    ]
  }
}
```

### 9.4 查询考勤详情 (教师)

#### 9.4.1 基本信息

  * **请求路径：** `/teacher/attendance/{session_id}/records`
  * **请求方式：** `GET`
  * [cite\_start]**接口描述：** 对应教师“查询考勤记录” [cite: 65]。查询某次考勤任务的所有学生状态。

#### 9.4.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `session_id` | Long | 是 | (路径参数) 考勤任务ID |
| `status` | Integer | 否 | [cite\_start]按状态筛选 (1:出勤, 2:缺勤, 3:迟到, 4:请假) [cite: 558] |

  * **请求数据样例：** `/teacher/attendance/1/records?status=2`

#### 9.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": [
    {
      "record_id": 1,
      "student_id": 1001,
      "student_name": "A同学",
      "student_id_number": "2021001001",
      "status": 1,
      "check_in_time": "2025-11-08T10:01:00",
      "face_api_score": 0.98,
      "remarks": null
    },
    {
      "record_id": 2,
      "student_id": 1002,
      "student_name": "B同学",
      "student_id_number": "2021001002",
      "status": 2,
      "check_in_time": null,
      "face_api_score": null,
      "remarks": null
    }
  ]
}
```

### 9.5 手动修改考勤状态 (教师)

#### 9.5.1 基本信息

  * **请求路径：** `/teacher/attendance/records/{record_id}`
  * **请求方式：** `PUT`
  * **接口描述：** 教师手动修改学生的考勤状态（如：将缺勤改为请假）。

#### 9.5.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `record_id` | Long | 是 | (路径参数) [cite\_start]学生考勤记录ID [cite: 558] |
| `status` | Integer | 是 | [cite\_start]新的状态 (1:出勤, 2:缺勤, 3:迟到, 4:请假) [cite: 558] |
| `remarks` | String | 否 | [cite\_start]备注 (如: "已线下确认请假") [cite: 558] |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "status": 4,
    "remarks": "已线下确认请假"
}
```

#### 9.5.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

-----

## 10\. 考勤 (Student)

(此模块对应学生端的签到、查看考勤 和 请假功能)

### 10.1 查询当前可签到任务 (学生)

#### 10.1.1 基本信息

  * **请求路径：** `/student/classes/{class_id}/attendance/active`
  * **请求方式：** `GET`
  * **接口描述：** 学生查询指定班级**当前正在进行中**的签到任务。

#### 10.1.2 请求参数

  * **格式：** 路径参数
  * **请求参数样例：** `/student/classes/501/attendance/active`

#### 10.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "session_id": 1,
    "class_id": 501,
    "session_type": 3,
    "start_time": "2025-11-08T10:00:00",
    "end_time": "2025-11-08T10:05:00"
  }
}
```

### 10.2 课程签到 (学生)

#### 10.2.1 基本信息

  * **请求路径：** `/student/attendance/{session_id}/check-in`
  * **请求方式：** `POST`
  * [cite\_start]**接口描述：** 对应学生“课程签到” [cite: 66] 功能。

#### 10.2.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `session_id` | Long | 是 | (路径参数) 考勤任务ID |
| `check_in_latitude` | Decimal | 否 | (类型2或3时必填) [cite\_start]签到时纬度 [cite: 558] |
| `check_in_longitude` | Decimal | 否 | (类型2或3时必填) [cite\_start]签到时经度 [cite: 558] |
| `face_image_url` | String | 否 | (类型1或3时必填) 人脸照片 (需先 /upload ) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "check_in_latitude": 30.5397,
    "check_in_longitude": 114.3601,
    "face_image_url": "https://.../face_img_1001.jpg"
}
```

#### 10.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": {
        "record_id": 1,
        "status": 1, 
        "check_in_time": "2025-11-08T10:01:00",
        "face_api_score": 0.98 
    }
}
```

### 10.3 查询我的考勤记录 (学生)

#### 10.3.1 基本信息

  * **请求路径：** `/student/classes/{class_id}/my-attendance`
  * **请求方式：** `GET`
  * **接口描述：** 学生查询自己在某个班级的所有考勤记录。

#### 10.3.2 请求参数

  * **格式：** 路径参数 + `queryString`
  * **请求参数样例：** `/student/classes/501/my-attendance?page=1&pageSize=10`

#### 10.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "session_id": 1,
        "session_start_time": "2025-11-08T10:00:00",
        "my_status": 1,
        "my_check_in_time": "2025-11-08T10:01:00"
      }
    ]
  }
}
```

-----

## 11\. 请假管理 (Student / Teacher)

[cite\_start](此模块基于 `t_leave_request` 表 [cite: 558])

### 11.1 提交请假申请 (学生)

#### 11.1.1 基本信息

  * **请求路径：** `/student/leave-requests`
  * **请求方式：** `POST`
  * **接口描述：** 学生提交请假申请。

#### 11.1.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `class_id` | Long | 否 | (可扩展) [cite\_start]针对某课程的请假 [cite: 558] |
| `reason` | String | 是 | [cite\_start]请假理由 [cite: 558] |
| `start_time` | Timestamp | 是 | [cite\_start]请假开始时间 [cite: 558] |
| `end_time` | Timestamp | 是 | [cite\_start]请假结束时间 [cite: 558] |
| `approver_id` | Long | 否 | (可扩展) 指定审批人 (如辅导员或任课教师) |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "class_id": 501,
    "reason": "身体不适，需要去医院",
    "start_time": "2025-11-08T08:00:00",
    "end_time": "2025-11-08T12:00:00"
}
```

#### 11.1.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```

### 11.2 查询我的请假申请 (学生)

#### 11.2.1 基本信息

  * **请求路径：** `/student/leave-requests`
  * **请求方式：** `GET`
  * **接口描述：** 学生查询自己的请假申请列表。

#### 11.2.2 请求参数

  * **格式：** `queryString`
  * **请求参数样例：** `/student/leave-requests?page=1&pageSize=10`

#### 11.2.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
  "code": 1,
  "msg": "success",
  "data": {
    "total": 1,
    "rows": [
      {
        "request_id": 1,
        "reason": "身体不适...",
        "start_time": "2025-11-08T08:00:00",
        "end_time": "2025-11-08T12:00:00",
        "status": 1,
        "approver_id": 2001
      }
    ]
  }
}
```

### 11.3 查询待我审批的请假 (教师)

#### 11.3.1 基本信息

  * **请求路径：** `/teacher/leave-requests/pending`
  * **请求方式：** `GET`
  * **接口描述：** 教师查询需要自己审批的请假申请 ( `status = 1` 且 `approver_id` 为自己)。

#### 11.3.2 请求参数

  * **格式：** `queryString`
  * **请求参数样例：** `/teacher/leave-requests/pending?page=1&pageSize=10`

#### 11.3.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：** (同 11.2.3)

### 11.4 审批请假申请 (教师)

#### 11.4.1 基本信息

  * **请求路径：** `/teacher/leave-requests/{request_id}/approve`
  * **请求方式：** `PUT`
  * **接口描述：** 教师审批请假申请。

#### 11.4.2 请求参数

  * **格式：** `application/json`
  * **参数说明：**

| 参数名 | 类型 | 是否必填 | 备注 |
| :--- | :--- | :--- | :--- |
| `request_id` | Long | 是 | (路径参数) 申请ID |
| `status` | Integer | 是 | [cite\_start]审批状态 (2:已批准, 3:已驳回) [cite: 558] |
| `approval_remarks` | String | 否 | [cite\_start]审批意见 [cite: 558] |

  * **请求数据样例：**

<!-- end list -->

```json
{
    "status": 2,
    "approval_remarks": "批准"
}
```

#### 11.4.3 响应数据

  * **参数格式：** `application/json`
  * **响应数据样例：**

<!-- end list -->

```json
{
    "code": 1,
    "msg": "success",
    "data": null
}
```
